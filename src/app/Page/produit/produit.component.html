<ion-header>
  <app-header></app-header>
</ion-header>
<ion-content class="ion-padding">
  <p>Vous êtes dans produits</p>
  <ng-container *ngIf="produits && produits.length > 0">
    <ion-toolbar>
      <ion-searchbar [(ngModel)]="searchTerm" (ionInput)="filterItems()" placeholder="Rechercher un bateau..."></ion-searchbar>
    </ion-toolbar>
    <ion-buttons>
      <ion-button 
        [ngClass]="{'active': category === 'all'}" 
        (click)="filterByCategory('all')">All</ion-button>
      
      <ion-button 
        [ngClass]="{'active': category === 0}" 
        (click)="filterByCategory(0)">Poisson</ion-button>
      
      <ion-button 
        [ngClass]="{'active': category === 1}" 
        (click)="filterByCategory(1)">Crustacé</ion-button>
      
      <ion-button 
        [ngClass]="{'active': category === 2}" 
        (click)="filterByCategory(2)">Coquillage</ion-button>
    </ion-buttons>
    <ion-list>
      <ion-card *ngFor="let produit of filtreProduits">
        <div (click)="navigateToInfo(produit, 'produit')" style="cursor: pointer;">
          <ion-card-header>
            <img src="{{produit.url}}" class="restaurant-image">
            <ion-card-title>{{ produit.name }}</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <p>Prix: {{ produit.price }} € / {{ produit.unit }}</p>
            <p>{{ produit.availability ? 'Disponible' : 'Indisponible' }}</p>
            <p>En soldes : {{ produit.sale ? 'Oui' : 'Non' }}</p>
            <p>Origine: {{ produit.provenance }}</p>
          </ion-card-content>
        </div>
        <div>
          <button (click)="removeFromCart(produit.id)">-</button>
          <span>{{ getProductQuantity(produit.id) }}</span>
          <button (click)="addToCart(produit)">+</button>
        </div>
      </ion-card>
    </ion-list>
  </ng-container>

  <ng-container *ngIf="!produits || produits.length === 0">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Aucune donnée à afficher</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        Veuillez ajouter des produits pour les afficher ici.
      </ion-card-content>
    </ion-card>
  </ng-container>
</ion-content>
